> ### 쿠키와 세션

쿠키는 브라우저가 서버로부터 응답으로 Set-Cookie 헤더를 받은 해당하는 데이터를 저장한 뒤 모든 요청에 쿠키정보를 포함하여 보냅니다.

- 즉, 쿠키는 `naver.com`같은 사이트 방문할 때마다 이전에 방문한 사이트 정보를 기억하는 데이터 파일입니다.

- 여러사이트에 데이터가 공유될 수 있어 보안에 취약할 수 있습니다.

- 쿠키는 `userId=user-1321;userName=sparta` 와 같이 문자열 형식으로 존재하며 쿠키 간에는 세미콜론(;) 으로 구분되고 "="을 기준으로 키와 값(value)형태로 나뉩니다.

세션은 쿠키를 기반으로 구성된 기술입니다. 쿠키가 여러 클라이언트(사이트)가 쿠키 데이터를 확인 할 수 있었던 점과 다르게 세션은 데이터를 서버에만 저장합니다. 좀 더 안정적입니다.

- 일반적으로 세션ID를 쿠키에다 저장을해 클라이언트에게 전달하고, 서버는 이 세션 ID를 사용해 저장된 세션 데이터를 조회합니다.

세션과 쿠키 모두 만료 기간이 있습니다.

#### 쿠키가 만들어지는 과정과 목적

서버가 클라이언트의 HTTP요청을 수신할때, 서버는 응답에 Set-Cookie라는 헤더를 함께 전송해 줍니다. 그 후 쿠키는 해당 서버에 의해 만들어진 응답과 함께 Cookie HTTP 헤더안에 포함되어 전달받습니다.

- 예) 클라에서 로그인시(요청) 서버는 로그인 성공시 해당 응답과 함께 쿠키데이터를 줍니다. 클라에서 이젠 로그인된 상태(쿠키데이터를 가지고있는 상태)로 여러 API를 이용하여 요청을 합니다. 그러면 서버는 그 쿠키데이터를 (로그인되어 있는 상태인지) 확인하여 쿠키 정보에 맞는 권한에 맞는 응답을 해줍니다.

- 그리고 쿠키의 경우 서버를 재시작하거나 새로고침을 하더라도 로그인이 유지되는 점이 있습니다. 이는 사용자는 편리하지만 서버의 입장에선 보안 문제가 발생할 수 있습니다. 쿠키가 조작되거나 노출되면 해당 권한을 탈취해 해킹공격을 받을 수 있게 됩니다.

- 그래서 나온것이 세션입니다. 민감한 정보를 서버에서만 관리하게 하고, 사용자 식별자 정보를 통해서 사용자의 정보를 반환해 줍니다. 즉 실제 데이터는 서버에만 있고 클라이언트는 식별자 정보로 요청하여 데이터를 주고 받습니다.
